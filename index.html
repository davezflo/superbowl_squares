<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Super Bowl Squares</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  table { border-collapse: collapse; margin-top: 10px; }
  td, th {
    border: 1px solid #333;
    width: 60px;
    height: 60px;
    text-align: center;
    vertical-align: middle;
    font-size: 12px;
  }
  th { background: #eee; }
  td.locked { background: #f3f3f3; }
  button { margin-right: 5px; }
</style>
</head>
<body>

<h2>Super Bowl Squares</h2>

<div>
  <button onclick="lockBoard()">ğŸ”’ Lock Board</button>
  <button onclick="randomizeNumbers()">ğŸ² Randomize Numbers</button>
  <button onclick="resetGame()">â™»ï¸ Reset</button>
</div>

<p id="status"></p>

<table id="grid"></table>

<script>
const SIZE = 10;
let locked = false;
let numbersSet = false;
let topNums = [];
let sideNums = [];

const state = JSON.parse(localStorage.getItem("squaresState")) || {};

function save() {
  localStorage.setItem("squaresState", JSON.stringify({
    locked, numbersSet, topNums, sideNums, names: getNames()
  }));
}

function load() {
  if (!state.names) return;
  locked = state.locked;
  numbersSet = state.numbersSet;
  topNums = state.topNums || [];
  sideNums = state.sideNums || [];

  Object.entries(state.names).forEach(([id, name]) => {
    const cell = document.getElementById(id);
    if (cell) cell.innerText = name;
  });
}

function getNames() {
  const names = {};
  document.querySelectorAll("td[data-cell]").forEach(td => {
    if (td.innerText) names[td.id] = td.innerText;
  });
  return names;
}

function updateStatus() {
  status.innerText =
    locked ? "ğŸ”’ Board Locked" :
    "ğŸŸ¢ Open for claiming squares";
}

function createGrid() {
  for (let r = 0; r <= SIZE; r++) {
    const row = document.createElement("tr");
    for (let c = 0; c <= SIZE; c++) {
      const cell = document.createElement(r === 0 || c === 0 ? "th" : "td");

      if (r === 0 && c > 0) cell.id = "top-" + (c - 1);
      else if (c === 0 && r > 0) cell.id = "side-" + (r - 1);
      else if (r > 0 && c > 0) {
        cell.id = `cell-${r-1}-${c-1}`;
        cell.dataset.cell = true;
        cell.onclick = () => claim(cell);
      }
      row.appendChild(cell);
    }
    grid.appendChild(row);
  }
}

function claim(cell) {
  if (locked) return;
  const name = prompt("Enter your name:");
  if (!name) return;
  cell.innerText = name;
  save();
}

function lockBoard() {
  locked = true;
  document.querySelectorAll("td[data-cell]").forEach(td => td.classList.add("locked"));
  updateStatus();
  save();
}

function randomizeNumbers() {
  if (!locked || numbersSet) return alert("Lock board first.");
  topNums = shuffle([...Array(10).keys()]);
  sideNums = shuffle([...Array(10).keys()]);
  topNums.forEach((n, i) => document.getElementById("top-" + i).innerText = n);
  sideNums.forEach((n, i) => document.getElementById("side-" + i).innerText = n);
  numbersSet = true;
  save();
}

function resetGame() {
  if (!confirm("Reset everything?")) return;
  localStorage.removeItem("squaresState");
  location.reload();
}

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

createGrid();
load();
updateStatus();
</script>

</body>
</html>
