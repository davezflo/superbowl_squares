<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Super Bowl Squares</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  table { border-collapse: collapse; margin-top: 10px; }
  th, td {
    border: 1px solid #333;
    width: 60px;
    height: 60px;
    text-align: center;
    vertical-align: middle;
    font-size: 12px;
  }
  th { background: #eee; }
  td.locked { background: #f5f5f5; cursor: not-allowed; }
  .controls button { margin-right: 8px; }
</style>
</head>
<body>

<h2>Super Bowl Squares</h2>
<h3 style="margin-bottom:5px;">Patriots vs. Seahawks</h3>
<p style="margin-top:0;">Columns = Patriots â€¢ Rows = Seahawks</p>

<div class="controls">
  <button onclick="lockBoard()">ğŸ”’ Lock Board</button>
  <button onclick="randomizeNumbers()">ğŸ² Randomize Numbers</button>
  <button onclick="resetGame()">â™»ï¸ Reset</button>
</div>

<p id="status"></p>

<table id="grid"></table>

<script>
const SIZE = 10;
let locked = false;
let numbersSet = false;
let topNums = [];
let sideNums = [];

const saved = JSON.parse(localStorage.getItem("squaresState")) || {};

function save() {
  localStorage.setItem("squaresState", JSON.stringify({
    locked, numbersSet, topNums, sideNums, names: getNames()
  }));
}

function getNames() {
  const names = {};
  document.querySelectorAll("td[data-cell]").forEach(td => {
    if (td.innerText) names[td.id] = td.innerText;
  });
  return names;
}

function updateStatus() {
  document.getElementById("status").innerText =
    locked ? "ğŸ”’ Board Locked" : "ğŸŸ¢ Board Open";
}

function createGrid() {
  const grid = document.getElementById("grid");

  // Patriots label row
  let row = document.createElement("tr");
  row.innerHTML = `<th></th><th colspan="10" style="font-size:16px;">Patriots</th>`;
  grid.appendChild(row);

  // Top numbers row
  row = document.createElement("tr");
  row.appendChild(document.createElement("th"));
  for (let c = 0; c < SIZE; c++) {
    const th = document.createElement("th");
    th.id = `top-${c}`;
    row.appendChild(th);
  }
  grid.appendChild(row);

  // Seahawks rows + cells
  for (let r = 0; r < SIZE; r++) {
    row = document.createElement("tr");

    const side = document.createElement("th");
    side.id = `side-${r}`;
    row.appendChild(side);

    for (let c = 0; c < SIZE; c++) {
      const td = document.createElement("td");
      td.id = `cell-${r}-${c}`;
      td.dataset.cell = "true";
      td.onclick = () => claim(td);
      row.appendChild(td);
    }
    grid.appendChild(row);
  }
}

function claim(cell) {
  if (locked) return;
  const name = prompt("Enter your name:");
  if (!name) return;
  cell.innerText = name;
  save();
}

function lockBoard() {
  locked = true;
  document.querySelectorAll("td[data-cell]").forEach(td => td.classList.add("locked"));
  updateStatus();
  save();
}

function randomizeNumbers() {
  if (!locked || numbersSet) {
    alert("Lock the board first.");
    return;
  }
  topNums = shuffle([...Array(10).keys()]);
  sideNums = shuffle([...Array(10).keys()]);

  topNums.forEach((n, i) => document.getElementById(`top-${i}`).innerText = n);
  sideNums.forEach((n, i) => document.getElementById(`side-${i}`).innerText = n);

  numbersSet = true;
  save();
}

function resetGame() {
  if (!confirm("Reset everything?")) return;
  localStorage.removeItem("squaresState");
  location.reload();
}

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function load() {
  if (!saved.names) return;
  locked = saved.locked;
  numbersSet = saved.numbersSet;
  topNums = saved.topNums || [];
  sideNums = saved.sideNums || [];

  Object.entries(saved.names).forEach(([id, name]) => {
    const cell = document.getElementById(id);
    if (cell) cell.innerText = name;
  });

  if (numbersSet) {
    topNums.forEach((n, i) => document.getElementById(`top-${i}`).innerText = n);
    sideNums.forEach((n, i) => document.getElementById(`side-${i}`).innerText = n);
  }

  if (locked) {
    document.querySelectorAll("td[data-cell]").forEach(td => td.classList.add("locked"));
  }
}

createGrid();
load();
updateStatus();
</script>

</body>
</html>
